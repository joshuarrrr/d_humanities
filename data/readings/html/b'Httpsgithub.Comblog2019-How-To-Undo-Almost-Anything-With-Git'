





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">



  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-81a59bf26d881d29286674f6deefe779c444382fff322085b50ba455460ccae5.css" media="all" rel="stylesheet" />
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-8789d320be825216d799841dcb27bc201b0605572d4c8c07c30feb5bc27a66b7.css" media="all" rel="stylesheet" />
  
  
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-be0c84af30c778f90986cc77d701859038e21bff46cf13f01a578aa537c10bab.css" media="all" rel="stylesheet" />
  

  <meta name="viewport" content="width=device-width">
  
  <title>How to undo (almost) anything with Git · GitHub</title>
  <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta content="https://github.com/opengraph.png" property="og:image" /><meta content="GitHub" property="og:site_name" /><meta content="article" property="og:type" /><meta content="How to undo (almost) anything with Git" property="og:title" /><meta content="https://github.com/blog/2019-how-to-undo-almost-anything-with-git" property="og:url" /><meta content="One of the most useful features of any version control system is the ability to &quot;undo&quot; your mistakes. In Git, &quot;undo&quot; can mean many slightly different things.
When you make a new commit, Git stores ..." property="og:description" /><meta content="262588213843476" property="article:author" /><meta content="262588213843476" property="article:publisher" /><meta content="blog/general" property="article:section" /><meta content="2015-06-08 13:44:31 UTC" property="article:published_time" />

  <link rel="assets" href="https://assets-cdn.github.com/">
  
  <meta name="pjax-timeout" content="1000">
  
  <meta name="request-id" content="DCEB:6853:3306B57:4CD9AF7:5920871D" data-pjax-transient>
  

  <meta name="selected-link" value="general" data-pjax-transient>

  <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
<meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
    <meta name="google-analytics" content="UA-3769691-2">

<meta content="collector.githubapp.com" name="octolytics-host" /><meta content="github" name="octolytics-app-id" /><meta content="https://collector.githubapp.com/github-external/browser_event" name="octolytics-event-url" /><meta content="DCEB:6853:3306B57:4CD9AF7:5920871D" name="octolytics-dimension-request_id" />





  <meta class="js-ga-set" name="dimension1" content="Logged Out">


  

      <meta name="hostname" content="github.com">
  <meta name="user-login" content="">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="ZThjOTcxZjkxNThkYjkwNTI3N2EyMjU0MGQwNWMyMmVmZmY3YTZjMjU0NWE3NTFjY2MwZjRiZGFlOWIzYTlhMXx7InJlbW90ZV9hZGRyZXNzIjoiNjguNDkuMTczLjIxNCIsInJlcXVlc3RfaWQiOiJEQ0VCOjY4NTM6MzMwNkI1Nzo0Q0Q5QUY3OjU5MjA4NzFEIiwidGltZXN0YW1wIjoxNDk1MzAzOTY1LCJob3N0IjoiZ2l0aHViLmNvbSJ9">


  <meta name="html-safe-nonce" content="497d979bea9161510822ef4b7e40537c6aca9ea0">

  <meta http-equiv="x-pjax-version" content="9f48f82d435db8e8916f273e55a94a05">
  

    <link rel="alternate" type="application/atom+xml" title="The GitHub Blog’s featured posts" href="https://github.com/blog.atom">
<link rel="alternate" type="application/atom+xml" title="The GitHub Blog: All posts" href="https://github.com/blog/all.atom">
<link rel="alternate" type="application/atom+xml" title="The GitHub Blog: Broadcasts only" href="https://github.com/blog/broadcasts.atom">
  <meta name="viewport" content="width=device-width">
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-be0c84af30c778f90986cc77d701859038e21bff46cf13f01a578aa537c10bab.css" media="all" rel="stylesheet" />


    <link rel="canonical" href="https://github.com/blog/2019-how-to-undo-almost-anything-with-git" data-pjax-transient>


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">



  </head>

  <body class="logged-out env-production">
    



  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



          <header class="site-header js-details-container Details" role="banner">
  <div class="container-responsive">
    <a class="header-logo-invertocat" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
      <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
    </a>

    <button class="btn-link float-right site-header-toggle js-details-target" type="button" aria-label="Toggle navigation">
      <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewBox="0 0 12 16" width="18"><path fill-rule="evenodd" d="M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"/></svg>
    </button>

    <div class="site-header-menu">
      <nav class="site-header-nav">
        <a href="/features" class="js-selected-navigation-item nav-item" data-ga-click="Header, click, Nav menu - item:features" data-selected-links="/features /features">
          Features
</a>        <a href="/business" class="js-selected-navigation-item nav-item" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/security /business/customers /business">
          Business
</a>        <a href="/explore" class="js-selected-navigation-item nav-item" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship /showcases /explore">
          Explore
</a>        <a href="/pricing" class="js-selected-navigation-item nav-item" data-ga-click="Header, click, Nav menu - item:pricing" data-selected-links="/pricing /pricing/developer /pricing/team /pricing/business-hosted /pricing/business-enterprise /pricing">
          Pricing
</a>      </nav>

      <div class="site-header-actions">
          <div class="header-search   js-site-search" role="search">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/search" class="js-site-search-form" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
    <label class="form-control header-search-wrapper js-chromeless-input-container">
        <a href="/blog/2019-how-to-undo-almost-anything-with-git" class="header-search-scope no-underline">/blog/2019-how-to-undo-almost-anything-with-git</a>
      <input type="text"
        class="form-control header-search-input js-site-search-focus "
        data-hotkey="s"
        name="q"
        value=""
        placeholder="Search GitHub"
        aria-label="Search GitHub"
        data-unscoped-placeholder="Search GitHub"
        data-scoped-placeholder="Search"
        autocapitalize="off">
        <input type="hidden" class="js-site-search-type-field" name="type" >
    </label>
</form></div>


          <a class="text-bold site-header-link" href="/login?return_to=%2Fblog%2F2019-how-to-undo-almost-anything-with-git" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
            <span class="text-gray">or</span>
            <a class="text-bold site-header-link" href="/join?source=header" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
      </div>
    </div>
  </div>
</header>



  </div>

  <div id="start-of-content" class="accessibility-aid"></div>

    <div id="js-flash-container">
</div>



  <div role="main">
        



  <div id="js-pjax-container" data-pjax-container>
      <div class="border-bottom py-4 mb-4 position-relative separation">
    <div class="container">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/blog/search" class="blog-search" data-pjax="true" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
        <svg aria-hidden="true" class="octicon octicon-search" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>
        <input class="form-control blog-search-input" type="text" name="q" id="blog-search" value="" aria-label="Search blog">
</form>
      <h1 class="my-0 blog-title-group">
          <a href="/blog" id="blog-home" class="blog-home" aria-label="Blog homepage"><svg aria-hidden="true" class="octicon octicon-home" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M16 9l-3-3V2h-2v2L8 1 0 9h2l1 5c0 .55.45 1 1 1h8c.55 0 1-.45 1-1l1-5h2zm-4 5H9v-4H7v4H4L2.81 7.69 8 2.5l5.19 5.19L12 14z"/></svg></a><a href="/blog/2019-how-to-undo-almost-anything-with-git" class=" blog-title">How to undo (almost) anything with Git</a>
      </h1>
    </div>
  </div><!-- /.pagehead -->

  <div class="container" id="blog-main">
    
<div class="blog-aside">

  <ul class="menu" role="navigation" data-pjax>
    <a href="/blog" class="js-selected-navigation-item menu-item" data-selected-links=" /blog">Featured</a>
    <a href="/blog/category/all" class="js-selected-navigation-item menu-item" data-selected-links="all /blog/category/all">All Posts</a>
    <a href="/blog/category/ship" class="js-selected-navigation-item menu-item" data-selected-links="ship /blog/category/ship">New Features</a>
    <a href="/blog/category/engineering" class="js-selected-navigation-item menu-item" data-selected-links="engineering /blog/category/engineering">Engineering</a>
    <a href="/blog/category/enterprise" class="js-selected-navigation-item menu-item" data-selected-links="enterprise /blog/category/enterprise">Enterprise</a>
    <a href="/blog/category/education" class="js-selected-navigation-item menu-item" data-selected-links="education /blog/category/education">Education</a>
    <a href="/blog/category/conferences" class="js-selected-navigation-item menu-item" data-selected-links="conferences /blog/category/conferences">Conferences</a>
    <a href="/blog/category/meetup" class="js-selected-navigation-item menu-item" data-selected-links="meetup /blog/category/meetup">Meetups</a>
    <a href="/blog/category/hire" class="js-selected-navigation-item menu-item" data-selected-links="hire /blog/category/hire">New Hires</a>
    <a href="/blog/category/watercooler" class="js-selected-navigation-item menu-item" data-selected-links="watercooler /blog/category/watercooler">Watercooler</a>
  </ul>

  <a class="rss" href="/blog/subscribe" data-pjax>
    <svg aria-hidden="true" class="octicon octicon-rss" height="16" version="1.1" viewBox="0 0 10 16" width="10"><path fill-rule="evenodd" d="M2 13H0v-2c1.11 0 2 .89 2 2zM0 3v1a9 9 0 0 1 9 9h1C10 7.48 5.52 3 0 3zm0 4v1c2.75 0 5 2.25 5 5h1c0-3.31-2.69-6-6-6z"/></svg>
    Subscribe
  </a>

    <a href="https://githubuniverse.com/satellite/?utm_source=github&utm_medium=banner&utm_campaign=ww-satellite-20170405" class="d-block link-gray-dark text-center" data-ga-click="Blog sidebar, click, Satellite">
      <img src="https://assets-cdn.github.com/images/modules/site/satellite-logo.png" alt="" class="mt-5 mb-2" width="150px">
      <img src="https://assets-cdn.github.com/images/modules/site/satellite-wordmark.png" alt="" class="mt-5 mb-2" width="150px">
    </a>
    <p class="text-gray mb-1 text-center">
      Check out GitHub Satellite, in orbit around London on <span class="no-wrap">May 22-23</span>.
    </p>
    <p class="mb-1 text-center">
      <a href="https://githubuniverse.com/satellite/?utm_source=github&utm_medium=banner&utm_campaign=ww-satellite-20170405" data-ga-click="Blog sidebar, click, Satellite">Learn&nbsp;more</a>
    </p>
</div>

    <div class="blog-content">
      
  <ul class="blog-post-meta">
    <li class="meta-item">
      <svg aria-hidden="true" class="octicon octicon-calendar" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M13 2h-1v1.5c0 .28-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5V2H6v1.5c0 .28-.22.5-.5.5h-2c-.28 0-.5-.22-.5-.5V2H2c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1h11c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 12H2V5h11v9zM5 3H4V1h1v2zm6 0h-1V1h1v2zM6 7H5V6h1v1zm2 0H7V6h1v1zm2 0H9V6h1v1zm2 0h-1V6h1v1zM4 9H3V8h1v1zm2 0H5V8h1v1zm2 0H7V8h1v1zm2 0H9V8h1v1zm2 0h-1V8h1v1zm-8 2H3v-1h1v1zm2 0H5v-1h1v1zm2 0H7v-1h1v1zm2 0H9v-1h1v1zm2 0h-1v-1h1v1zm-8 2H3v-1h1v1zm2 0H5v-1h1v1zm2 0H7v-1h1v1zm2 0H9v-1h1v1z"/></svg>
      June  8, 2015
    </li>

  <li class="fn meta-item">
    <img alt="@jaw6" class="author-avatar" height="18" src="https://avatars0.githubusercontent.com/u/2077?v=3&amp;s=36" width="18" /> <a href="/jaw6">jaw6</a>
  </li>

    <li class="meta-item">
      <svg aria-hidden="true" class="octicon octicon-file-directory" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"/></svg>
      <a href="/blog/category/general">General</a>
    </li>

</ul>


  <div class="blog-post-body markdown-body">
    <p>One of the most useful features of any version control system is the ability to "undo" your mistakes. In Git, "undo" can mean many slightly different things.</p>
<p>When you make a new commit, Git stores a snapshot of your repository at that specific moment in time; later, you can use Git to go back to an earlier version of your project.</p>
<p>In this post, I'm going to take a look at some common scenarios where you might want to "undo" a change you've made and the best way to do it using Git.</p>
<h2><a id="user-content-undo-a-public-change" class="anchor" href="#undo-a-public-change" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Undo a "public" change</h2>
<p><strong>Scenario:</strong> You just ran <code>git push</code>, sending your changes to GitHub, now you realize there's a problem with one of those commits. You'd like to undo that commit.</p>
<p><strong>Undo with:</strong> <code>git revert &lt;SHA&gt;</code></p>
<p><strong>What's happening:</strong> <code>git revert</code> will create a new commit that's the opposite (or inverse) of the given SHA. If the old commit is "matter", the new commit is "anti-matter"—anything removed in the old commit will be added in the new commit and anything added in the old commit will be removed in the new commit.</p>
<p>This is Git's safest, most basic "undo" scenario, because it doesn't <em>alter</em> history—so you can now <code>git push</code> the new "inverse" commit to undo your mistaken commit.</p>
<h2><a id="user-content-fix-the-last-commit-message" class="anchor" href="#fix-the-last-commit-message" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Fix the last commit message</h2>
<p><strong>Scenario:</strong> You just typo'd the last commit message, you did <code>git commit -m "Fxies bug #42"</code> but before <code>git push</code> you realized that really should say "Fixes bug #42".</p>
<p><strong>Undo with:</strong> <code>git commit --amend</code> or <code>git commit --amend -m "Fixes bug #42"</code></p>
<p><strong>What's happening:</strong> <code>git commit --amend</code> will update and replace the most recent commit with a new commit that combines any staged changes with the contents of the previous commit. With nothing currently staged, this just rewrites the previous commit message.</p>
<h2><a id="user-content-undo-local-changes" class="anchor" href="#undo-local-changes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Undo "local" changes</h2>
<p><strong>Scenario:</strong> The cat walked across the keyboard and somehow saved the changes, then crashed the editor. You haven't committed those changes, though. You want to undo everything in that file—just go back to the way it looked in the last commit.</p>
<p><strong>Undo with:</strong> <code>git checkout -- &lt;bad filename&gt;</code></p>
<p><strong>What's happening:</strong> <code>git checkout</code> alters files in the working directory to a state previously known to Git. You could provide a branch name or specific SHA you want to go back to or, by default, Git will assume you want to checkout <code>HEAD</code>, the last commit on the currently-checked-out branch.</p>
<p>Keep in mind: any changes you "undo" this way are <em>really</em> gone. They were never committed, so Git can't help us recover them later. Be sure you know what you're throwing away here! (Maybe use <code>git diff</code> to confirm.)</p>
<h2><a id="user-content-reset-local-changes" class="anchor" href="#reset-local-changes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reset "local" changes</h2>
<p><strong>Scenario:</strong> You've made some commits locally (not yet pushed), but everything is terrible, you want to undo the last three commits—like they never happened.</p>
<p><strong>Undo with:</strong> <code>git reset &lt;last good SHA&gt;</code> or <code>git reset --hard &lt;last good SHA&gt;</code></p>
<p><strong>What's happening:</strong> <code>git reset</code> rewinds your repository's history all the way back to the specified SHA. It's as if those commits never happened. By default, <code>git reset</code> preserves the working directory. The commits are gone, but the <em>contents</em> are still on disk. This is the safest option, but often, you'll want to "undo" the commits <em>and</em> the changes in one move—that's what <code>--hard</code> does.</p>
<h2><a id="user-content-redo-after-undo-local" class="anchor" href="#redo-after-undo-local" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Redo after undo "local"</h2>
<p><strong>Scenario:</strong> You made some commits, did a <code>git reset --hard</code> to "undo" those changes (see above), and <em>then</em> realized: you want those changes back!</p>
<p><strong>Undo with:</strong> <code>git reflog</code> and <code>git reset</code> or <code>git checkout</code></p>
<p><strong>What's happening:</strong> <code>git reflog</code> is an amazing resource for recovering project history. You can recover <em>almost</em> anything—anything you've committed—via the reflog.</p>
<p>You're probably familiar with the <code>git log</code> command, which shows a list of commits. <code>git reflog</code> is similar, but instead shows a list of times when <code>HEAD</code> changed.</p>
<p>Some caveats:</p>
<ul>
<li><code>HEAD</code> changes <em>only</em>.<code>HEAD</code> changes when you switch branches, make commits with <code>git commit</code> and un-make commits with <code>git reset</code>, but <code>HEAD</code> does <em>not</em> change when you <code>git checkout -- &lt;bad filename&gt;</code> (from an earlier scenario—as mentioned before, those changes were never committed, so the reflog can't help us recover those.</li>
<li><code>git reflog</code> doesn't last forever. Git will periodically clean up objects which are "unreachable." Don't expect to find months-old commits lying around in the reflog forever.</li>
<li>Your <code>reflog</code> is yours and yours alone. You can't use <code>git reflog</code> to restore another developer's un-pushed commits.</li>
</ul>
<p><a href="https://cloud.githubusercontent.com/assets/2077/6953866/f6b9f054-d891-11e4-8c53-838eff9f40ae.png" target="_blank"><img src="https://cloud.githubusercontent.com/assets/2077/6953866/f6b9f054-d891-11e4-8c53-838eff9f40ae.png" alt="reflog" style="max-width:100%;"></a></p>
<p>So... how do you use the reflog to "redo" a previously "undone" commit or commits? It depends on what exactly you want to accomplish:</p>
<ul>
<li>If you want to restore the project's history as it was at that moment in time use <code>git reset --hard &lt;SHA&gt;</code></li>
<li>If you want to recreate one or more files in your working directory as they were at that moment in time, without altering history use <code>git checkout &lt;SHA&gt; -- &lt;filename&gt;</code></li>
<li>If you want to replay <em>exactly one</em> of those commits into your repository use <code>git cherry-pick &lt;SHA&gt;</code></li>
</ul>
<h2><a id="user-content-once-more-with-branching" class="anchor" href="#once-more-with-branching" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Once more, with branching</h2>
<p><strong>Scenario:</strong> You made some commits, then realized you were checked out on <code>master</code>. You wish you could make those commits on a feature branch instead.</p>
<p><strong>Undo with:</strong> <code>git branch feature</code>, <code>git reset --hard origin/master</code>, and <code>git checkout feature</code></p>
<p><strong>What's happening:</strong> You may be used to creating new branches with <code>git checkout -b &lt;name&gt;</code>—it's a popular short-cut for creating a new branch and checking it out right away—but you don't want to switch branches just yet. Here, <code>git branch feature</code> creates a new branch called <code>feature</code> pointing at your most recent commit, but leaves you checked out to <code>master</code>.</p>
<p>Next, <code>git reset --hard</code> rewinds <code>master</code> back to <code>origin/master</code>, before any of your new commits. Don't worry, though, they are still available on <code>feature</code>.</p>
<p>Finally, <code>git checkout</code> switches to the new <code>feature</code> branch, with all of your recent work intact.</p>
<h2><a id="user-content-branch-in-time-saves-nine" class="anchor" href="#branch-in-time-saves-nine" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Branch in time saves nine</h2>
<p><strong>Scenario:</strong> You started a new branch <code>feature</code> based on <code>master</code>, but <code>master</code> was pretty far behind <code>origin/master</code>. Now that <code>master</code> branch is in sync with <code>origin/master</code>, you wish commits on <code>feature</code> were starting <em>now</em>, instead of being so far behind.</p>
<p><strong>Undo with:</strong> <code>git checkout feature</code> and <code>git rebase master</code></p>
<p><strong>What's happening:</strong> You could have done this with <code>git reset</code> (no <code>--hard</code>, intentionally preserving changes on disk) then <code>git checkout -b &lt;new branch name&gt;</code> and then re-commit the changes, but that way, you'd lose the commit history. There's a better way.</p>
<p><code>git rebase master</code> does a couple of things:</p>
<ul>
<li>First it locates the common ancestor between your currently-checked-out branch and <code>master</code>.</li>
<li>Then it resets the currently-checked-out branch to that ancestor, holding all later commits in a temporary holding area.</li>
<li>Then it advances the currently-checked-out-branch to the end of <code>master</code> and replays the commits from the holding area <em>after</em> <code>master</code>'s last commit.</li>
</ul>
<h2><a id="user-content-mass-undoredo" class="anchor" href="#mass-undoredo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mass undo/redo</h2>
<p><strong>Scenario:</strong> You started this feature in one direction, but mid-way through, you realized another solution was better. You've got a dozen or so commits, but you only want some of them. You'd like the others to just disappear.</p>
<p><strong>Undo with:</strong> <code>git rebase -i &lt;earlier SHA&gt;</code></p>
<p><strong>What's happening:</strong> <code>-i</code> puts <code>rebase</code> in "interactive mode". It starts off like the rebase discussed above, but before replaying any commits, it pauses and allows you to gently modify each commit as it's replayed.</p>
<p><code>rebase -i</code> will open in your default text editor, with a list of commits being applied, like this:</p>
<p><a href="https://cloud.githubusercontent.com/assets/2077/6953863/f6b1ab88-d891-11e4-97c1-e0630ac74e74.png" target="_blank"><img src="https://cloud.githubusercontent.com/assets/2077/6953863/f6b1ab88-d891-11e4-97c1-e0630ac74e74.png" alt="rebase-interactive1" style="max-width:100%;"></a></p>
<p>The first two columns are key: the first is the selected command for the commit identified by the SHA in the second column. By default, <code>rebase -i</code> assumes each commit is being applied, via the <code>pick</code> command.</p>
<p>To drop a commit, just delete that line in your editor. If you no longer want the bad commits in your project, you can delete lines 1 and 3-4 above.</p>
<p>If you want to preserve the <em>contents</em> of the commit but edit the commit <em>message</em>, you use the <code>reword</code> command. Just replace the word <code>pick</code> in the first column with the word <code>reword</code> (or just <code>r</code>). It can be tempting to rewrite the commit message right now, but that won't work—<code>rebase -i</code> ignores everything after the SHA column. The text after that is really just to help us remember what <code>0835fe2</code> is all about. When you've finished with <code>rebase -i</code>, you'll be prompted for any new commit messages you need to write.</p>
<p>If you want to combine two commits together, you can use the <code>squash</code> or <code>fixup</code> commands, like this:</p>
<p><a href="https://cloud.githubusercontent.com/assets/2077/6953865/f6b605ca-d891-11e4-98cf-d567ca9f4edc.png" target="_blank"><img src="https://cloud.githubusercontent.com/assets/2077/6953865/f6b605ca-d891-11e4-98cf-d567ca9f4edc.png" alt="rebase-interactive2" style="max-width:100%;"></a></p>
<p><code>squash</code> and <code>fixup</code> combine "up"—the commit with the "combine" command will be merged into the commit immediately before it. In this scenario, <code>0835fe2</code> and <code>6943e85</code> will be combined into one commit, then <code>38f5e4e</code> and <code>af67f82</code> will be combined together into another.</p>
<p>When you select <code>squash</code>, Git will prompt us to give the new, combined commit a new commit message; <code>fixup</code> will give the new commit the message from the first commit in the list. Here, you know that <code>af67f82</code> is an "ooops" commit, so you'll just use the commit message from <code>38f5e4e</code> as is, but you'll write a new message for the new commit you get from combining <code>0835fe2</code> and <code>6943e85</code>.</p>
<p>When you save and exit your editor, Git will apply your commits in order from top to bottom. You can alter the order commits apply by changing the order of commits before saving. If you'd wanted, you could have combined <code>af67f82</code> with <code>0835fe2</code> by arranging things like this:</p>
<p><a href="https://cloud.githubusercontent.com/assets/2077/6953864/f6b4a9d2-d891-11e4-9ac9-10039c031d06.png" target="_blank"><img src="https://cloud.githubusercontent.com/assets/2077/6953864/f6b4a9d2-d891-11e4-9ac9-10039c031d06.png" alt="rebase-interactive3" style="max-width:100%;"></a></p>
<h2><a id="user-content-fix-an-earlier-commit" class="anchor" href="#fix-an-earlier-commit" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Fix an earlier commit</h2>
<p><strong>Scenario:</strong> You failed to include a file in an earlier commit, it'd be great if that earlier commit could somehow include the stuff you left out. You haven't pushed, yet, but it wasn't the most recent commit, so you can't use <code>commit --amend</code>.</p>
<p><strong>Undo with:</strong> <code>git commit --squash &lt;SHA of the earlier commit&gt;</code> and <code>git rebase --autosquash -i &lt;even earlier SHA&gt;</code></p>
<p><strong>What's happening:</strong> <code>git commit --squash</code> will create a new commit with a commit message like <code>squash! Earlier commit</code>. (You could manually create a commit with a message like that, but <code>commit --squash</code> saves you some typing.)</p>
<p>You can also use <code>git commit --fixup</code> if you don't want to be prompted to write a new commit message for the combined commit. In this scenario, you'd probably use <code>commit --fixup</code>, since you just want to use the earlier commit's commit message during <code>rebase</code>.</p>
<p><code>rebase --autosquash -i</code> will launch an interactive <code>rebase</code> editor, but the editor will open with any <code>squash!</code> and <code>fixup!</code> commits already paired to the commit target in the list of commits, like so:</p>
<p><a href="https://cloud.githubusercontent.com/assets/2077/6953862/f6a7a1d8-d891-11e4-8784-c32262ff54da.png" target="_blank"><img src="https://cloud.githubusercontent.com/assets/2077/6953862/f6a7a1d8-d891-11e4-8784-c32262ff54da.png" alt="rebase-autosquash" style="max-width:100%;"></a></p>
<p>When using <code>--squash</code> and <code>--fixup</code>, you might not remember the SHA of the commit you want to fix—only that it was one or five commits ago. You might find using Git's <code>^</code> and <code>~</code> operators especially handy. <code>HEAD^</code> is one commit before <code>HEAD</code>. <code>HEAD~4</code> is four commits before <code>HEAD</code> - or, altogether, five commits back.</p>
<h2><a id="user-content-stop-tracking-a-tracked-file" class="anchor" href="#stop-tracking-a-tracked-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Stop tracking a tracked file</h2>
<p><strong>Scenario:</strong> You accidentally added <code>application.log</code> to the repository, now every time you run the application, Git reports there are unstaged changes in <code>application.log</code>. You put <code>*.log</code> in the <code>.gitignore</code> file, but it's still there—how do you tell git to to "undo" tracking changes in this file?</p>
<p><strong>Undo with:</strong> <code>git rm --cached application.log</code></p>
<p><strong>What's happening:</strong> While <code>.gitignore</code> prevents Git from tracking changes to files or even noticing the existence of files it's never tracked before, once a file has been added and committed, Git will continue noticing changes in that file. Similarly, if you've used <code>git add -f</code> to "force", or override, <code>.gitignore</code>, Git will keep tracking changes. You won't have to use <code>-f</code> to add it in the future.</p>
<p>If you want to remove that should-be-ignored file from Git's tracking, <code>git rm --cached</code> will remove it from tracking but leave the file untouched on disk. Since it's now being ignored, you won't see that file in <code>git status</code> or accidentally commit changes from that file again.</p>
<hr>
<p>That's how to undo anything with Git. To learn more about any of the Git commands used here, check out the relevant documentation:</p>
<ul>
<li><a href="http://git-scm.com/docs/git-checkout">checkout</a></li>
<li><a href="http://git-scm.com/docs/git-commit">commit</a></li>
<li><a href="http://git-scm.com/docs/git-rebase">rebase</a></li>
<li><a href="http://git-scm.com/docs/git-reflog">reflog</a></li>
<li><a href="http://git-scm.com/docs/git-reset">reset</a></li>
<li><a href="http://git-scm.com/docs/git-revert">revert</a></li>
<li><a href="http://git-scm.com/docs/git-rm">rm</a></li>
</ul>
  </div>

  <div class="blog-feedback">
    <h2 class="blog-feedback-header with-twitter">
      Have feedback on this post? Let <a href="https://twitter.com/intent/tweet?text=@github%20&amp;related=github&amp;url=https://github.com/blog/2019-how-to-undo-almost-anything-with-git" target="blank">@github</a> know on Twitter.
    </h2>
    <p class="blog-feedback-description">
      Need help or found a bug? <a href="/contact">Contact us</a>.
    </p>
  </div>

    </div>
  </div>

  </div>

  <div class="modal-backdrop js-touch-events"></div>

  </div>

        <div class="container-responsive mt-6" role="contentinfo">
  <div class="site-footer-marketing d-flex flex-wrap py-5 mb-5">
    <div class="site-footer-marketing-col mb-3">
      <svg aria-hidden="true" class="octicon octicon-logo-github" height="24" version="1.1" viewBox="0 0 45 16" width="67"><path fill-rule="evenodd" d="M18.53 12.03h-.02c.009 0 .015.01.024.011h.006l-.01-.01zm.004.011c-.093.001-.327.05-.574.05-.78 0-1.05-.36-1.05-.83V8.13h1.59c.09 0 .16-.08.16-.19v-1.7c0-.09-.08-.17-.16-.17h-1.59V3.96c0-.08-.05-.13-.14-.13h-2.16c-.09 0-.14.05-.14.13v2.17s-1.09.27-1.16.28c-.08.02-.13.09-.13.17v1.36c0 .11.08.19.17.19h1.11v3.28c0 2.44 1.7 2.69 2.86 2.69.53 0 1.17-.17 1.27-.22.06-.02.09-.09.09-.16v-1.5a.177.177 0 0 0-.146-.18zm23.696-2.2c0-1.81-.73-2.05-1.5-1.97-.6.04-1.08.34-1.08.34v3.52s.49.34 1.22.36c1.03.03 1.36-.34 1.36-2.25zm2.43-.16c0 3.43-1.11 4.41-3.05 4.41-1.64 0-2.52-.83-2.52-.83s-.04.46-.09.52c-.03.06-.08.08-.14.08h-1.48c-.1 0-.19-.08-.19-.17l.02-11.11c0-.09.08-.17.17-.17h2.13c.09 0 .17.08.17.17v3.77s.82-.53 2.02-.53l-.01-.02c1.2 0 2.97.45 2.97 3.88zm-8.72-3.61H33.84c-.11 0-.17.08-.17.19v5.44s-.55.39-1.3.39-.97-.34-.97-1.09V6.25c0-.09-.08-.17-.17-.17h-2.14c-.09 0-.17.08-.17.17v5.11c0 2.2 1.23 2.75 2.92 2.75 1.39 0 2.52-.77 2.52-.77s.05.39.08.45c.02.05.09.09.16.09h1.34c.11 0 .17-.08.17-.17l.02-7.47c0-.09-.08-.17-.19-.17zm-23.7-.01h-2.13c-.09 0-.17.09-.17.2v7.34c0 .2.13.27.3.27h1.92c.2 0 .25-.09.25-.27V6.23c0-.09-.08-.17-.17-.17zm-1.05-3.38c-.77 0-1.38.61-1.38 1.38 0 .77.61 1.38 1.38 1.38.75 0 1.36-.61 1.36-1.38 0-.77-.61-1.38-1.36-1.38zm16.49-.25h-2.11c-.09 0-.17.08-.17.17v4.09h-3.31V2.6c0-.09-.08-.17-.17-.17h-2.13c-.09 0-.17.08-.17.17v11.11c0 .09.09.17.17.17h2.13c.09 0 .17-.08.17-.17V8.96h3.31l-.02 4.75c0 .09.08.17.17.17h2.13c.09 0 .17-.08.17-.17V2.6c0-.09-.08-.17-.17-.17zM8.81 7.35v5.74c0 .04-.01.11-.06.13 0 0-1.25.89-3.31.89-2.49 0-5.44-.78-5.44-5.92S2.58 1.99 5.1 2c2.18 0 3.06.49 3.2.58.04.05.06.09.06.14L7.94 4.5c0 .09-.09.2-.2.17-.36-.11-.9-.33-2.17-.33-1.47 0-3.05.42-3.05 3.73s1.5 3.7 2.58 3.7c.92 0 1.25-.11 1.25-.11v-2.3H4.88c-.11 0-.19-.08-.19-.17V7.35c0-.09.08-.17.19-.17h3.74c.11 0 .19.08.19.17z"/></svg>
      <p class="text-gray alt-text-small">
        &copy; 2017
      </p>
    </div>
    <div class="site-footer-marketing-col mb-3 pr-3">
      <h4 class="mb-2">Features</h4>
      <ul class="list-style-none text-gray">
        <li class="lh-condensed mb-2"><a href="/features#code-review" class="muted-link alt-text-small">Code review</a></li>
        <li class="lh-condensed mb-2"><a href="/features#project-management" class="muted-link alt-text-small">Project management</a></li>
          <li class="lh-condensed mb-2"><a href="/features#integrations" class="muted-link alt-text-small">Integrations</a></li>
        <li class="lh-condensed mb-2"><a href="/features#community-management" class="muted-link alt-text-small">Community</a></li>
        <li class="lh-condensed mb-2"><a href="/features#documentation" class="muted-link alt-text-small">Documentation</a></li>
        <li class="lh-condensed mb-2"><a href="/features#code-hosting" class="muted-link alt-text-small">Code hosting</a></li>
      </ul>
    </div>
    <div class="site-footer-marketing-col mb-3 pr-3">
      <h4 class="mb-2">Platform</h4>
      <ul class="list-style-none">
        <li class="lh-condensed mb-2"><a href="https://atom.io" class="muted-link alt-text-small">Atom</a></li>
        <li class="lh-condensed mb-2"><a href="http://electron.atom.io/" class="muted-link alt-text-small">Electron</a></li>
        <li class="lh-condensed mb-2"><a href="https://desktop.github.com/" class="muted-link alt-text-small">GitHub Desktop</a></li>
        <li class="lh-condensed mb-2"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api" class="muted-link alt-text-small">Developers</a></li>
      </ul>
    </div>
    <div class="site-footer-marketing-col mb-3 pr-3">
      <h4 class="mb-2">Community</h4>
      <ul class="list-style-none">
        <li class="lh-condensed mb-2"><a href="/personal" class="muted-link alt-text-small">Personal</a></li>
        <li class="lh-condensed mb-2"><a href="/open-source" class="muted-link alt-text-small">Open source</a></li>
        <li class="lh-condensed mb-2"><a href="/business" class="muted-link alt-text-small">For Business</a></li>
        <li class="lh-condensed mb-2"><a href="https://education.github.com/" class="muted-link alt-text-small">For Education</a></li>
        <li class="lh-condensed mb-2"><a href="https://community.github.com/" class="muted-link alt-text-small">Sponsorships</a></li>
      </ul>
    </div>
    <div class="site-footer-marketing-col mb-3 pr-3">
      <h4 class="mb-2">Company</h4>
      <ul class="list-style-none">
        <li class="lh-condensed mb-2"><a href="https://github.com/about" class="muted-link alt-text-small" data-ga-click="Footer, go to about, text:about">About</a></li>
        <li class="lh-condensed mb-2"><a href="https://github.com/blog" class="muted-link alt-text-small" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li class="lh-condensed mb-2"><a href="/business/customers" class="muted-link alt-text-small">Customers</a></li>
        <li class="lh-condensed mb-2"><a href="/about/careers" class="muted-link alt-text-small">Careers</a></li>
        <li class="lh-condensed mb-2"><a href="/about/press" class="muted-link alt-text-small">Press</a></li>
        <li class="lh-condensed mb-2"><a href="https://shop.github.com" class="muted-link alt-text-small">Shop</a></li>
      </ul>
    </div>
    <div class="site-footer-marketing-col mb-3 pr-3">
      <h4 class="mb-2">Resources</h4>
      <ul class="list-style-none">
        <li class="lh-condensed mb-2"><a href="https://github.com/contact" class="muted-link alt-text-small" data-ga-click="Footer, go to contact, text:contact">Contact GitHub</a></li>
        <li class="lh-condensed mb-2"><a href="https://help.github.com" class="muted-link alt-text-small" data-ga-click="Footer, go to help, text:help">Help</a></li>
        <li class="lh-condensed mb-2"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status" class="muted-link alt-text-small">Status</a></li>
        <li class="lh-condensed mb-2"><a href="https://github.com/site/terms" class="muted-link alt-text-small" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li class="lh-condensed mb-2"><a href="https://github.com/site/privacy" class="muted-link alt-text-small" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li class="lh-condensed mb-2"><a href="https://github.com/security" class="muted-link alt-text-small" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="lh-condensed mb-2"><a href="https://services.github.com/" class="muted-link alt-text-small">Training</a></li>
      </ul>
    </div>
  </div>
</div>




  

  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
    You can't perform that action at this time.
  </div>


    <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/compat-8a4318ffea09a0cdb8214b76cf2926b9f6a0ced318a317bed419db19214c690d.js"></script>
    <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-5fe43fc6a9e5120c427334a38e9a7601418682a33981c073851434a7e1005049.js"></script>
    <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github-f5fdc557107f718a5192c173d8f6248b1a6afa7578e2d2522f323f81c99c0b9b.js"></script>
    
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
  </div>
</div>


  </body>
</html>

